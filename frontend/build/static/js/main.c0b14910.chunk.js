(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,a){e.exports={ProductivityStats:"ProductivityStats_ProductivityStats__16iDs",main:"ProductivityStats_main__2ZeZw",title:"ProductivityStats_title__2_T6r",info:"ProductivityStats_info__Q84MU",trends:"ProductivityStats_trends__3WvA-",indexStat:"ProductivityStats_indexStat__249id",iconStat:"ProductivityStats_iconStat__1rj_E"}},227:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(70),i=a.n(c),l=a(35),o=a(5),s=a(229),d=a(44),u=a.n(d);var m=function(e){e.defaultWidth,e.defaultHeight;var t=e.calcWidth,a=void 0===t?64:t,c=e.calcHeight,i=void 0===c?48:c,l=e.video,o=e.setScore,s=Object(n.useRef)(null),d=Object(n.useRef)(null);return Object(n.useEffect)(function(){if(!s.current)return!1;s.current.width=a,s.current.height=i,d.current.width=a,d.current.height=i;var e=s.current.getContext("2d"),t=d.current.getContext("2d"),n=setInterval(function(){e.globalCompositeOperation="difference",e.drawImage(l.current,0,0,a,i);var n=e.getImageData(0,0,a,i);if(!0===s.current.ready){var r=function(e){for(var t=e.data,a=0,n=0;n<t.length;n+=4){var r=.3*t[n]+.6*t[n+1]+.1*t[n+2],c=Math.min(255,r*(255/32));t[n]=0,t[n+1]=c,t[n+2]=0,r>=32&&a++}return a}(n);o(r),t.putImageData(n,0,0)}e.globalCompositeOperation="source-over",e.drawImage(l.current,0,0,a,i),s.current.ready=!0},100);return function(){clearInterval(n)}},[]),r.a.createElement("div",{className:u.a.container},r.a.createElement("canvas",{ref:d}),r.a.createElement("canvas",{className:u.a.hide,ref:s}))},v=a(16);v.c.global.animation=!1;var f=function(e){var t=e.score,a=!e.globalTrend,c=Object(n.useState)({labels:[],datasets:[{data:[],label:"Activity Monitor",borderColor:"#8DD4FF",backgroundColor:["rgba(18, 47, 65, .8)"]}]}),i=Object(o.a)(c,2),l=i[0],s=i[1];return Object(n.useEffect)(function(){s(function(e){var n=(new Date).getSeconds();return console.log(a),40===e.labels.length&&a&&(e.labels.shift(),e.datasets.forEach(function(e){e.data.shift()})),e.labels.push(n),e.datasets.forEach(function(e){e.data.push(t)}),e})},[t]),r.a.createElement(v.b,{data:l,redraw:!0,options:{animation:!1,legend:{display:!1},tooltips:{enabled:!1},scales:{scaleLabel:[{fontColor:"#8DD4FF"}],yAxes:[{display:!1}],xAxes:[{ticks:{maxTicksLimit:6}}]},elements:{point:{radius:0}}}})},p=function(e){var t=e.messages;return 0===t.length?r.a.createElement("p",null,"No Entries yet."):r.a.createElement("ul",null,t.map(function(e){return r.a.createElement("li",null,e)}))},h=a(11),_=a.n(h),g=a(72),E=a.n(g),b=function(e){var t=e.title,a=e.info,n=void 0===a?void 0:a;return r.a.createElement("div",null,r.a.createElement("h2",null,t," ",void 0!==n?r.a.createElement("span",{className:E.a.focus},n):""))},S=a(45),y=a.n(S);v.c.global.defaultFontColor="#3F93C6";var N=function(e){var t=e.index,a=10*parseFloat(t),c={animation:!1,legend:{display:!1},tooltips:{enabled:!1},rotation:-1.1*Math.PI,circumference:1.2*Math.PI,cutoutPercentage:80},i=Object(n.useState)({datasets:[{data:[0,100],borderColor:"transparent",backgroundColor:["#8DD4FF","#122F41"],label:"Dataset 1"}],labels:["Red","Orange","Yellow","Green","Blue"]}),l=Object(o.a)(i,2),s=l[0],d=l[1];return Object(n.useEffect)(function(){d(function(e){return e.datasets[0].data=[a,100-a],e})},[t]),r.a.createElement("div",{className:y.a.IndexGraph},r.a.createElement(v.a,{data:s,options:c,redraw:!0}),r.a.createElement("div",{className:y.a.label},t))},x=a(73),O=a.n(x),j=a(46),w=a.n(j),M=a(74),D=a.n(M),I=function(e){var t=e.index,a=e.currentState,c=e.activityIndex,i=function(e,t){return r.a.createElement(n.Fragment,null,r.a.createElement("img",{src:t,alt:e}),r.a.createElement("div",{className:_.a.label},r.a.createElement("h4",null,"Current Meeting Type:"),r.a.createElement("p",null,e)))};return r.a.createElement("div",{className:_.a.ProductivityStats},r.a.createElement("div",{className:_.a.title},r.a.createElement(b,{title:"Meeting productivity",info:"high"})),r.a.createElement("div",{className:_.a.main},r.a.createElement("div",{className:_.a.indexStat},r.a.createElement(N,{index:t}),r.a.createElement("p",null,"Meeting Productivity Index"))),r.a.createElement("div",{className:_.a.info},r.a.createElement("div",{className:_.a.iconStat,id:"meeting-type"},"quiet"===a&&i("No meeting active",D.a),"started"===a&&i("Meeting started",w.a),"normal"===a&&i("Formal Meeting",w.a),"active"===a&&i("Engaged Meeting",O.a))),r.a.createElement("div",{className:_.a.trends},r.a.createElement(b,{title:"Productivity trends"}),r.a.createElement(f,{score:c,globalTrend:!0})))},F=a(6),P=a.n(F),T=function(){var e=Object(n.useState)(150),t=Object(o.a)(e,2),a=t[0],c=t[1];Object(n.useEffect)(function(){var e=setInterval(function(){c(function(e){return e<=0?0:e-1})},1e3);return function(){clearInterval(e)}},[]);var i="0"+Math.floor(a/60),l=a-60*i;l=l<10?"0"+l:l;var s=100/150*(150-a),d=150-a,u="0"+Math.floor(d/60),m=d-60*u;return m=m<10?"0"+m:m,r.a.createElement("div",{className:P.a.TimeSchedule},r.a.createElement("h1",null,i,":",l),r.a.createElement("div",{className:P.a.timeline},r.a.createElement("div",{className:P.a.startendlabels},r.a.createElement("div",{className:P.a.label},r.a.createElement("p",null,"START"),r.a.createElement("p",{className:P.a.timestamp},"00:00")),r.a.createElement("div",{className:P.a.label},r.a.createElement("p",null,"END"),r.a.createElement("p",{className:P.a.timestamp},"02:30"))),r.a.createElement("div",{className:P.a.progressBar},r.a.createElement("div",{className:P.a.progress,style:{width:s+"%"}}),r.a.createElement("div",{className:P.a.label,style:{left:"calc("+s+"% - 20px)"}},r.a.createElement("p",{className:P.a.timestamp},u,":",m)))))},A=a(8),C=a.n(A);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(function(){var e=Object(n.useRef)(void 0),t=Object(n.useState)("quiet"),a=Object(o.a)(t,2),c=a[0],i=a[1],d=Object(n.useState)(0),u=Object(o.a)(d,2),v=u[0],h=u[1],_=Object(n.useState)([]),g=Object(o.a)(_,2),E=g[0],S=g[1],y=Object(n.useState)([]),N=Object(o.a)(y,2),x=N[0],O=N[1],j=Object(n.useState)(0),w=Object(o.a)(j,2),M=w[0],D=w[1];return Object(n.useEffect)(function(){navigator.mediaDevices.getUserMedia({audio:!1,video:{width:640,height:480}}).then(function(t){e.current.srcObject=t}).catch(function(e){console.log(e)})},[e.current]),Object(n.useEffect)(function(){S(function(e){return 100===e.length&&e.shift(),e.push(v),e});var e=E.reduce(function(e,t){return e+t},0);e>2e3&&e<=4e3&&"quiet"===c&&(i("started"),O(function(e){return["Meeting started"].concat(Object(l.a)(e))}),fetch("http://192.168.2.2:5000/blinds/meeting/start").then(function(){}).catch(function(e){console.log(e)})),e>4e3&&e<=7e3&&"started"===c&&(i("normal"),O(function(e){return["Meeting turned formal"].concat(Object(l.a)(e))}),fetch("http://192.168.2.2:5000/blinds/meeting/formal").then(function(){}).catch(function(e){console.error(e)})),e>15e3&&"normal"===c&&(i("active"),O(function(e){return["Meeting turned engaged"].concat(Object(l.a)(e))}),fetch("http://192.168.2.2:5000/blinds/meeting/end").then(function(){}).catch(function(e){console.error(e)})),e<=5e4&&D(parseFloat(e/6e3).toFixed(2)),e>5e4&&D(parseFloat(8+Math.random()).toFixed(2))},[v]),r.a.createElement(s.a,null,r.a.createElement("div",{className:C.a.container},r.a.createElement("div",{className:C.a.motioncharts},r.a.createElement(b,{title:"Motion charts",info:v}),r.a.createElement(f,{score:v,globalTrend:!1})),r.a.createElement("div",{className:C.a.videostream},r.a.createElement(b,{title:"Video stream",info:"live"}),r.a.createElement("div",{className:C.a.videoContainer},r.a.createElement("video",{ref:e,autoPlay:!0}))),r.a.createElement("div",{className:C.a.motionstream},r.a.createElement(b,{title:"Motion detection",info:"live"}),r.a.createElement(m,{setScore:h,video:e})),r.a.createElement("div",{className:C.a.productivity},r.a.createElement(I,{index:M,currentState:c,activityIndex:M})),r.a.createElement("div",{className:C.a.facedetection}),r.a.createElement("div",{className:C.a.timeschedule},r.a.createElement("h2",null,"Timeschedule"),r.a.createElement(T,null)),r.a.createElement("div",{className:C.a.activitylog},r.a.createElement(b,{title:"Activity log"}),r.a.createElement(p,{messages:x}))))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},44:function(e,t,a){e.exports={container:"MotionDetector_container__2F9SI",hide:"MotionDetector_hide__GdL7B"}},45:function(e,t,a){e.exports={IndexGraph:"IndexGraph_IndexGraph__2DGG8",label:"IndexGraph_label__glnsD"}},46:function(e,t,a){e.exports=a.p+"static/media/icon-meeting-formal.f2b175bc.svg"},6:function(e,t,a){e.exports={TimeSchedule:"TimeSchedule_TimeSchedule__1DXKu",timestamp:"TimeSchedule_timestamp__3X5_P",startendlabels:"TimeSchedule_startendlabels__3PWbv",label:"TimeSchedule_label__2ukr0",progressBar:"TimeSchedule_progressBar__2cv-Y",progress:"TimeSchedule_progress__1khRs"}},72:function(e,t,a){e.exports={focus:"DashboardElementHeader_focus__2D8ly"}},73:function(e,t,a){e.exports=a.p+"static/media/icon-meeting-engaged.abc2e609.svg"},74:function(e,t,a){e.exports=a.p+"static/media/icon-meeting-inactive.0af465dc.svg"},75:function(e,t,a){e.exports=a(227)},8:function(e,t,a){e.exports={container:"App_container__3Q3C8",motioncharts:"App_motioncharts__1PHMW",videostream:"App_videostream__21OAi",motionstream:"App_motionstream__3RZAq",productivity:"App_productivity__DWWuJ",facedetection:"App_facedetection__10F2v",timeschedule:"App_timeschedule__2hW_N",activitylog:"App_activitylog__cxv8r",videoContainer:"App_videoContainer__3GFim"}}},[[75,2,1]]]);
//# sourceMappingURL=main.c0b14910.chunk.js.map