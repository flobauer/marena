(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports={ProductivityStats:"ProductivityStats_ProductivityStats__16iDs",main:"ProductivityStats_main__2ZeZw",title:"ProductivityStats_title__2_T6r",info:"ProductivityStats_info__Q84MU",trends:"ProductivityStats_trends__3WvA-",indexStat:"ProductivityStats_indexStat__249id",iconStat:"ProductivityStats_iconStat__1rj_E"}},224:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(67),i=a.n(r),o=a(32),l=a(4),s=a(41),d=a.n(s);var m=function(e){e.defaultWidth,e.defaultHeight;var t=e.calcWidth,a=void 0===t?64:t,r=e.calcHeight,i=void 0===r?48:r,o=e.video,l=e.setScore,s=Object(n.useRef)(null),m=Object(n.useRef)(null);return Object(n.useEffect)(function(){if(!s.current)return!1;s.current.width=a,s.current.height=i,m.current.width=a,m.current.height=i;var e=s.current.getContext("2d"),t=m.current.getContext("2d"),n=setInterval(function(){e.globalCompositeOperation="difference",e.drawImage(o.current,0,0,a,i);var n=e.getImageData(0,0,a,i);if(!0===s.current.ready){var c=function(e){for(var t=e.data,a=0,n=0;n<t.length;n+=4){var c=.3*t[n]+.6*t[n+1]+.1*t[n+2],r=Math.min(255,c*(255/32));t[n]=0,t[n+1]=r,t[n+2]=0,c>=32&&a++}return a}(n);l(c),t.putImageData(n,0,0)}e.globalCompositeOperation="source-over",e.drawImage(o.current,0,0,a,i),s.current.ready=!0},100);return function(){clearInterval(n)}},[]),c.a.createElement("div",{className:d.a.container},c.a.createElement("canvas",{ref:m}),c.a.createElement("canvas",{className:d.a.hide,ref:s}))},u=a(14);u.c.global.animation=!1;var v=function(e){var t=e.score,a=!e.globalTrend,r=Object(n.useState)({labels:[],datasets:[{data:[],label:"Activity Monitor",borderColor:"#8DD4FF",backgroundColor:["rgba(18, 47, 65, .8)"]}]}),i=Object(l.a)(r,2),o=i[0],s=i[1];return Object(n.useEffect)(function(){s(function(e){var n=(new Date).getSeconds();return 40===e.labels.length&&a&&(e.labels.shift(),e.datasets.forEach(function(e){e.data.shift()})),e.labels.push(n),e.datasets.forEach(function(e){e.data.push(t)}),e})},[t]),c.a.createElement(u.b,{data:o,redraw:!0,options:{animation:!1,legend:{display:!1},tooltips:{enabled:!1},scales:{scaleLabel:[{fontColor:"#8DD4FF"}],yAxes:[{display:!1}],xAxes:[{ticks:{maxTicksLimit:6}}]},elements:{point:{radius:0}}}})},f=function(e){var t=e.messages;return 0===t.length?c.a.createElement("p",null,"No Entries yet."):c.a.createElement("ul",null,t.map(function(e){return c.a.createElement("li",{key:Math.random()},e)}))},p=a(10),h=a.n(p),_=a(69),g=a.n(_),E=function(e){var t=e.title,a=e.info,n=void 0===a?void 0:a;return c.a.createElement("div",null,c.a.createElement("h2",null,t," ",void 0!==n?c.a.createElement("span",{className:g.a.focus},n):""))},b=a(42),S=a.n(b);u.c.global.defaultFontColor="#3F93C6";var y=function(e){var t=e.index,a=10*parseFloat(t),r={animation:!1,legend:{display:!1},tooltips:{enabled:!1},rotation:-1.1*Math.PI,circumference:1.2*Math.PI,cutoutPercentage:80},i=Object(n.useState)({datasets:[{data:[0,100],borderColor:"transparent",backgroundColor:["#8DD4FF","#122F41"],label:"Dataset 1"}],labels:["Red","Orange","Yellow","Green","Blue"]}),o=Object(l.a)(i,2),s=o[0],d=o[1];return Object(n.useEffect)(function(){d(function(e){return e.datasets[0].data=[a,100-a],e})},[t]),c.a.createElement("div",{className:S.a.IndexGraph},c.a.createElement(u.a,{data:s,options:r,redraw:!0}),c.a.createElement("div",{className:S.a.label},t))},x=a(70),N=a.n(x),O=a(43),j=a.n(O),w=a(71),M=a.n(w),I=function(e){var t=e.index,a=e.currentState,r=e.activityIndex,i=function(e,t){return c.a.createElement(n.Fragment,null,c.a.createElement("img",{src:t,alt:e}),c.a.createElement("div",{className:h.a.label},c.a.createElement("h4",null,"Current Meeting Type:"),c.a.createElement("p",null,e)))};return c.a.createElement("div",{className:h.a.ProductivityStats},c.a.createElement("div",{className:h.a.title},c.a.createElement(E,{title:"Meeting productivity",info:"high"})),c.a.createElement("div",{className:h.a.main},c.a.createElement("div",{className:h.a.indexStat},c.a.createElement(y,{index:t}),c.a.createElement("p",null,"Meeting Productivity Index"))),c.a.createElement("div",{className:h.a.info},c.a.createElement("div",{className:h.a.iconStat,id:"meeting-type"},"quiet"===a&&i("No meeting active",M.a),"started"===a&&i("Meeting started",j.a),"normal"===a&&i("Formal Meeting",j.a),"active"===a&&i("Engaged Meeting",N.a))),c.a.createElement("div",{className:h.a.trends},c.a.createElement(E,{title:"Productivity trends"}),c.a.createElement(v,{score:r,globalTrend:!0})))},D=a(5),F=a.n(D),P=function(){var e=Object(n.useState)(150),t=Object(l.a)(e,2),a=t[0],r=t[1];Object(n.useEffect)(function(){var e=setInterval(function(){r(function(e){return e<=0?0:e-1})},1e3);return function(){clearInterval(e)}},[]);var i="0"+Math.floor(a/60),o=a-60*i;o=o<10?"0"+o:o;var s=100/150*(150-a),d=150-a,m="0"+Math.floor(d/60),u=d-60*m;return u=u<10?"0"+u:u,c.a.createElement("div",{className:F.a.TimeSchedule},c.a.createElement("h1",null,i,":",o),c.a.createElement("div",{className:F.a.timeline},c.a.createElement("div",{className:F.a.startendlabels},c.a.createElement("div",{className:F.a.label},c.a.createElement("p",null,"START"),c.a.createElement("p",{className:F.a.timestamp},"00:00")),c.a.createElement("div",{className:F.a.label},c.a.createElement("p",null,"END"),c.a.createElement("p",{className:F.a.timestamp},"02:30"))),c.a.createElement("div",{className:F.a.progressBar},c.a.createElement("div",{className:F.a.progress,style:{width:s+"%"}}),c.a.createElement("div",{className:F.a.label,style:{left:"calc("+s+"% - 20px)"}},c.a.createElement("p",{className:F.a.timestamp},m,":",u)))))},A=a(7),C=a.n(A);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(function(){var e=Object(n.useRef)(void 0),t=Object(n.useState)("quiet"),a=Object(l.a)(t,2),r=a[0],i=a[1],s=Object(n.useState)(0),d=Object(l.a)(s,2),u=d[0],p=d[1],h=Object(n.useState)([]),_=Object(l.a)(h,2),g=_[0],b=_[1],S=Object(n.useState)([]),y=Object(l.a)(S,2),x=y[0],N=y[1],O=Object(n.useState)(0),j=Object(l.a)(O,2),w=j[0],M=j[1],D=function(e){if(e=new RegExp("[?&]"+encodeURIComponent(e)+"=([^&]*)").exec(window.location.search))return decodeURIComponent(e[1])}("AI_URL")||"192.168.2.2";return Object(n.useEffect)(function(){navigator.mediaDevices.getUserMedia({audio:!1,video:{width:640,height:480}}).then(function(t){e.current.srcObject=t}).catch(function(e){console.log(e)})},[e.current]),Object(n.useEffect)(function(){b(function(e){return 100===e.length&&e.shift(),e.push(u),e});var e=g.reduce(function(e,t){return e+t},0);e>2e3&&e<=4e3&&"quiet"===r&&(i("started"),N(function(e){return["Meeting started"].concat(Object(o.a)(e))}),fetch("http://".concat(D,":5000/blinds/meeting/start")).then(function(){}).catch(function(e){console.log(e)})),e>4e3&&e<=7e3&&"started"===r&&(i("normal"),N(function(e){return["Meeting turned formal"].concat(Object(o.a)(e))}),fetch("http://".concat(D,":5000/blinds/meeting/formal")).then(function(){}).catch(function(e){console.error(e)})),e>15e3&&"normal"===r&&(i("active"),N(function(e){return["Meeting turned engaged"].concat(Object(o.a)(e))}),fetch("http://".concat(D,":5000/blinds/meeting/end")).then(function(){}).catch(function(e){console.error(e)})),e<=5e4&&M(parseFloat(e/6e3).toFixed(2)),e>5e4&&M(parseFloat(8+Math.random()).toFixed(2))},[u]),c.a.createElement("div",{className:C.a.container},c.a.createElement("div",{className:C.a.motioncharts},c.a.createElement(E,{title:"Motion charts",info:u}),c.a.createElement(v,{score:u,globalTrend:!1})),c.a.createElement("div",{className:C.a.videostream},c.a.createElement(E,{title:"Video stream",info:"live"}),c.a.createElement("div",{className:C.a.videoContainer},c.a.createElement("video",{ref:e,autoPlay:!0}))),c.a.createElement("div",{className:C.a.motionstream},c.a.createElement(E,{title:"Motion detection",info:"live"}),c.a.createElement(m,{setScore:p,video:e})),c.a.createElement("div",{className:C.a.productivity},c.a.createElement(I,{index:w,currentState:r,activityIndex:w})),c.a.createElement("div",{className:C.a.facedetection}),c.a.createElement("div",{className:C.a.timeschedule},c.a.createElement("h2",null,"Timeschedule"),c.a.createElement(P,null)),c.a.createElement("div",{className:C.a.activitylog},c.a.createElement(E,{title:"Activity log"}),c.a.createElement(f,{messages:x})))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},41:function(e,t,a){e.exports={container:"MotionDetector_container__2F9SI",hide:"MotionDetector_hide__GdL7B"}},42:function(e,t,a){e.exports={IndexGraph:"IndexGraph_IndexGraph__2DGG8",label:"IndexGraph_label__glnsD"}},43:function(e,t,a){e.exports=a.p+"static/media/icon-meeting-formal.f2b175bc.svg"},5:function(e,t,a){e.exports={TimeSchedule:"TimeSchedule_TimeSchedule__1DXKu",timestamp:"TimeSchedule_timestamp__3X5_P",startendlabels:"TimeSchedule_startendlabels__3PWbv",label:"TimeSchedule_label__2ukr0",progressBar:"TimeSchedule_progressBar__2cv-Y",progress:"TimeSchedule_progress__1khRs"}},69:function(e,t,a){e.exports={focus:"DashboardElementHeader_focus__2D8ly"}},7:function(e,t,a){e.exports={container:"App_container__3Q3C8",motioncharts:"App_motioncharts__1PHMW",videostream:"App_videostream__21OAi",motionstream:"App_motionstream__3RZAq",productivity:"App_productivity__DWWuJ",facedetection:"App_facedetection__10F2v",timeschedule:"App_timeschedule__2hW_N",activitylog:"App_activitylog__cxv8r",videoContainer:"App_videoContainer__3GFim"}},70:function(e,t,a){e.exports=a.p+"static/media/icon-meeting-engaged.abc2e609.svg"},71:function(e,t,a){e.exports=a.p+"static/media/icon-meeting-inactive.0af465dc.svg"},72:function(e,t,a){e.exports=a(224)}},[[72,2,1]]]);
//# sourceMappingURL=main.d3c49fd1.chunk.js.map